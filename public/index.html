<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Custom Discord Bots - 15â‚¬</title>

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
font-family:Segoe UI,Tahoma;
background:linear-gradient(135deg,#667eea,#764ba2);
min-height:100vh;
display:flex;
justify-content:center;
align-items:center;
padding:20px
}
.container{
background:#fff;
border-radius:20px;
max-width:600px;
width:100%;
padding:40px;
box-shadow:0 20px 60px rgba(0,0,0,.3)
}
.header{text-align:center;margin-bottom:30px}
.header h1{color:#5865F2;font-size:2.3em}
.price-tag{
background:linear-gradient(135deg,#5865F2,#7289DA);
color:white;
padding:15px 30px;
border-radius:50px;
display:inline-block;
margin-top:20px;
font-size:1.4em
}
.hidden{display:none}
.login-section{text-align:center;padding:30px}
.discord-login-btn{
background:#5865F2;
color:white;
padding:15px 30px;
border-radius:10px;
text-decoration:none;
display:inline-flex;
gap:10px;
font-weight:600
}
.user-info{
display:flex;
gap:15px;
align-items:center;
background:#f3f4f6;
padding:15px;
border-radius:10px;
margin-bottom:20px
}
.user-avatar{width:50px;height:50px;border-radius:50%}
.logout-btn{
background:#ed4245;
color:white;
border:none;
padding:8px 12px;
border-radius:6px;
text-decoration:none
}
.form-group{margin-bottom:20px}
label{font-weight:600;display:block;margin-bottom:6px}
input,textarea{
width:100%;
padding:12px;
border-radius:10px;
border:2px solid #ddd
}
.submit-btn{
width:100%;
padding:15px;
background:linear-gradient(135deg,#5865F2,#7289DA);
color:white;
border:none;
border-radius:10px;
font-size:1.1em
}
.success-message{
background:#4CAF50;
color:white;
padding:20px;
border-radius:10px;
margin-top:20px;
text-align:center
}
.error-message{
background:#f44336;
color:white;
padding:15px;
border-radius:10px;
margin-bottom:15px;
display:none
}
</style>
</head>

<body>
<div class="container">

<div class="header">
<h1>ðŸ¤– Custom Discord Bots</h1>
<p>Bestelle deinen eigenen Discord Bot</p>
<div class="price-tag">15â‚¬ pro Bot</div>
</div>

<div id="errorMessage" class="error-message"></div>

<div id="loginSection" class="login-section">
<a href="/api/auth/login" class="discord-login-btn">
Mit Discord anmelden
</a>
</div>

<div id="orderSection" class="hidden">

<div class="user-info">
<img id="userAvatar" class="user-avatar">
<div>
<div id="userName"></div>
<div id="userTag"></div>
</div>
<a href="/api/auth/logout" class="logout-btn">Logout</a>
</div>

<form id="botForm">
<div class="form-group">
<label>Alter *</label>
<input type="number" id="age" min="13" required>
</div>

<div class="form-group">
<label>Bot Beschreibung *</label>
<textarea id="botDescription" required></textarea>
</div>

<div class="form-group">
<label>
<input type="checkbox" id="rulesAccept" required>
 Discord Regeln akzeptiert
</label>
</div>

<button class="submit-btn">Jetzt bestellen â€“ 15â‚¬</button>
</form>

<div id="successMessage" class="success-message hidden">
âœ… Bestellung gesendet!
</div>

</div>
</div>

<script>
async function checkAuth(){
const res=await fetch('/api/auth/user');
const data=await res.json();
if(data.loggedIn){
document.getElementById('loginSection').classList.add('hidden');
document.getElementById('orderSection').classList.remove('hidden');
user=data.user;
document.getElementById('userName').textContent=user.username;
document.getElementById('userTag').textContent=user.discriminator?('#'+user.discriminator):'';
document.getElementById('userAvatar').src=user.avatar||'https://cdn.discordapp.com/embed/avatars/0.png';
}
}

document.getElementById('botForm').onsubmit=async e=>{
e.preventDefault();
const res=await fetch('/api/order',{
method:'POST',
headers:{'Content-Type':'application/json'},
body:JSON.stringify({
age:age.value,
botDescription:botDescription.value,
rulesAccepted:rulesAccept.checked
})
});
const data=await res.json();
if(res.ok){
botForm.classList.add('hidden');
successMessage.classList.remove('hidden');
}else{
errorMessage.textContent=data.error;
errorMessage.style.display='block';
}
};

checkAuth();
</script>

</body>
</html>
